{"version":3,"sources":["../../../../assets/scripts/assets/scripts/areaUIMgr.js"],"names":["cc","Class","extends","Component","properties","areaConfig","JsonAsset","contentBackground","Node","areaItemPrefab","Prefab","goItemPrefab","spriteFrames","SpriteFrame","onLoad","setupContent","start","areaConfigObj","json","areaConfigNum","length","oneItem","instantiate","itemHeight","getChildByName","getContentSize","height","originBackgroundHeight","backgroundHeight","setContentSize","width","dataCenter","require","currentAreaLevel","playerData","index","areaLevel","areaId","item","icon","icon_bg","icon_res","sprite","getComponent","Sprite","frame","spriteFrame","xPosition","yPosition","setPosition","addChild","setScale","goItem","goButton","dollorLabel","enterDollor","othersData","nextAreaEnterDollor","helper","str","formatNumberShowStyle","Label","string","zIndex","on","onClickGoButton","backArea","node","backAreaMgr","onTouched","gameMgr","find","changeArea"],"mappings":"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","file":"areaUIMgr.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n        areaConfig: cc.JsonAsset,\n        contentBackground: cc.Node,\n        areaItemPrefab: cc.Prefab,\n        goItemPrefab: cc.Prefab,\n        spriteFrames: [cc.SpriteFrame]\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.setupContent();\n    },\n\n    start () {\n\n    },\n\n    // update (dt) {},\n\n    setupContent(){\n        var areaConfigObj = this.areaConfig.json;\n        var areaConfigNum = areaConfigObj.length;\n\n        var oneItem = cc.instantiate(this.areaItemPrefab);\n        var itemHeight = oneItem.getChildByName(\"item_bg\").getContentSize().height;\n        var originBackgroundHeight = this.contentBackground.getContentSize().height;\n        var backgroundHeight = areaConfigNum * itemHeight;\n        if (backgroundHeight < originBackgroundHeight) {\n            backgroundHeight = originBackgroundHeight;\n        }\n\n        this.contentBackground.setContentSize(this.contentBackground.getContentSize().width,backgroundHeight);\n        var dataCenter = require(\"dataCenter\");\n        var currentAreaLevel = dataCenter.playerData.currentAreaLevel;\n        for (var index = 0;index < areaConfigObj.length; index++) {\n            var areaLevel = areaConfigObj[index].areaId;\n            var item = cc.instantiate(this.areaItemPrefab);\n            var icon = item.getChildByName(\"icon\");\n            var icon_bg = icon.getChildByName(\"icon_bg\");\n            var icon_res = icon.getChildByName(\"icon_res\");\n            if (areaLevel <= currentAreaLevel) {\n                //icon_res set to real resource\n                \n                var sprite = icon_res.getComponent(cc.Sprite);\n                // cc.loader.loadRes(areaConfigObj[index].iconName,cc.SpriteFrame,function(err,res){\n                //     // cc.log(\"iconName is \" + areaConfigObj[index].iconName);\n                //     sprite.spriteFrame = res;\n                // })\n                var frame = this.spriteFrames[index];\n                sprite.spriteFrame = frame;\n            }\n\n            var xPosition = 0;\n            var yPosition = index * itemHeight;\n            item.setPosition(xPosition,yPosition);\n            this.contentBackground.addChild(item);\n\n            if (areaLevel == currentAreaLevel + 1) {\n                //add a button to change area\n                icon_bg.setScale(1.2,1.2);\n                icon_res.setScale(1.2,1.2);\n                \n                var goItem = cc.instantiate(this.goItemPrefab);\n                var goButton = goItem.getChildByName(\"goButton\");\n                var dollorLabel = goButton.getChildByName(\"dollorLabel\");\n\n                var enterDollor = dataCenter.othersData.nextAreaEnterDollor;\n                var helper = require(\"helper\");\n                var str = \"$ \" + helper.formatNumberShowStyle(enterDollor);\n                dollorLabel.getComponent(cc.Label).string = str;\n                goItem.zIndex = 100;\n                goItem.setPosition(440,410 + (index * itemHeight));\n                this.contentBackground.addChild(goItem);\n                goButton.on(\"click\",this.onClickGoButton,this);\n            }\n        }\n    },\n    onClickGoButton() {\n        var backArea = this.node.getChildByName(\"backArea\");\n        var backAreaMgr = backArea.getComponent(\"backAreaMgr\");\n        backAreaMgr.onTouched(null);\n\n        var gameMgr = cc.find(\"Canvas\").getComponent(\"gameMgr\");\n        var dataCenter = require(\"dataCenter\");\n        gameMgr.changeArea(dataCenter.playerData.currentAreaLevel + 1);\n    }\n});\n"]}