{"version":3,"sources":["../../../../assets/scripts/assets/scripts/loginSys.js"],"names":["loginSys","login","networkMgrNode","cc","find","networkMgr","getComponent","ws","sys","platform","WECHAT_GAME","wx","success","res","code","message","type","token","JSON","stringify","send","onReceiveMessage","data","callBack","target","dataCenter","require","playerData","neededFishesData","call","module","exports"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIA,WAAW;AAEXC,SAFW,mBAEH;AACJ,YAAIC,iBAAiBC,GAAGC,IAAH,CAAQ,gBAAR,CAArB;AACA,YAAIC,aAAaH,eAAeI,YAAf,CAA4B,YAA5B,CAAjB;;AAEA,YAAIC,KAAKF,WAAWE,EAApB;AACA,YAAIJ,GAAGK,GAAH,CAAOC,QAAP,IAAmBN,GAAGK,GAAH,CAAOE,WAA9B,EAA2C;AACvCC,eAAGV,KAAH,CAAS;AACLW,uBADK,mBACGC,GADH,EACQ;AACT,wBAAIC,OAAOD,IAAIC,IAAf;AACA,wBAAIC,UAAU;AACVC,8BAAM,OADI;AAEVC,+BAAOH;AAFG,qBAAd;AAIAC,8BAAUG,KAAKC,SAAL,CAAeJ,OAAf,CAAV;AACAR,uBAAGa,IAAH,CAAQL,OAAR;AACH;AATI,aAAT;AAWH,SAZD,MAaK;AACD,gBAAIA,UAAU;AACVC,sBAAM,OADI;AAEVC,uBAAO;AAFG,aAAd;AAIAF,sBAAUG,KAAKC,SAAL,CAAeJ,OAAf,CAAV;AACAR,eAAGa,IAAH,CAAQL,OAAR;AACH;AACJ,KA5BU;AA8BXM,oBA9BW,4BA8BMC,IA9BN,EA8BYC,QA9BZ,EA8BqBC,MA9BrB,EA8B6B;AACpC,YAAIC,aAAaC,QAAQ,YAAR,CAAjB;AACAD,mBAAWE,UAAX,GAAwBL,KAAKK,UAA7B;AACAF,mBAAWG,gBAAX,GAA8BN,KAAKM,gBAAnC;AACAL,iBAASM,IAAT,CAAcL,MAAd;AACH;AAnCU,CAAf;;AAsCAM,OAAOC,OAAP,GAAiB/B,QAAjB","file":"loginSys.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\nvar loginSys = {\n\n    login() {\n        var networkMgrNode = cc.find(\"networkMgrNode\");\n        var networkMgr = networkMgrNode.getComponent(\"networkMgr\");\n\n        var ws = networkMgr.ws;\n        if (cc.sys.platform == cc.sys.WECHAT_GAME) {\n            wx.login({\n                success(res) {\n                    var code = res.code;\n                    var message = {\n                        type: \"login\",\n                        token: code\n                    }\n                    message = JSON.stringify(message);\n                    ws.send(message);\n                }\n            })\n        }\n        else {\n            var message = {\n                type: \"login\",\n                token: \"houwan&1231\"\n            }\n            message = JSON.stringify(message);\n            ws.send(message);\n        }\n    },\n\n    onReceiveMessage(data, callBack,target) {\n        var dataCenter = require(\"dataCenter\");\n        dataCenter.playerData = data.playerData;\n        dataCenter.neededFishesData = data.neededFishesData;\n        callBack.call(target);\n    }\n}\n\nmodule.exports = loginSys;\n"]}